/**
 * generated by Xtext 2.16.0
 */
package com.mimacom.ddd.dm.dmx.ui.outline;

import com.mimacom.ddd.dm.base.DContext;
import com.mimacom.ddd.dm.base.DExpression;
import com.mimacom.ddd.dm.base.DMultiplicity;
import com.mimacom.ddd.dm.base.DNamedElement;
import com.mimacom.ddd.dm.base.DType;
import com.mimacom.ddd.dm.dmx.DmxAssignment;
import com.mimacom.ddd.dm.dmx.DmxContextReference;
import com.mimacom.ddd.dm.dmx.DmxIterator;
import com.mimacom.ddd.dm.dmx.DmxMemberNavigation;
import com.mimacom.ddd.dm.dmx.DmxPackage;
import com.mimacom.ddd.dm.dmx.DmxPredicateWithCorrelationVariable;
import org.eclipse.emf.ecore.EAttribute;
import org.eclipse.emf.ecore.EReference;
import org.eclipse.jface.resource.ImageDescriptor;
import org.eclipse.swt.graphics.Image;
import org.eclipse.xtext.ui.editor.outline.IOutlineNode;
import org.eclipse.xtext.ui.editor.outline.impl.DefaultOutlineTreeProvider;
import org.eclipse.xtext.ui.editor.outline.impl.EObjectNode;
import org.eclipse.xtext.ui.editor.outline.impl.EStructuralFeatureNode;
import org.eclipse.xtext.xbase.lib.Conversions;

/**
 * Customization of the default outline structure.
 * 
 * See https://www.eclipse.org/Xtext/documentation/310_eclipse_support.html#outline
 */
@SuppressWarnings("all")
public class DmxOutlineTreeProvider extends DefaultOutlineTreeProvider {
  private static final DmxPackage DMX = DmxPackage.eINSTANCE;
  
  private static final ImageDescriptor NULL_IMAGE = ((ImageDescriptor) null);
  
  private static final ImageDescriptor FEATURE_IMAGE = DmxOutlineTreeProvider.NULL_IMAGE;
  
  public EObjectNode _createNode(final IOutlineNode parentNode, final DContext context) {
    EObjectNode _xblockexpression = null;
    {
      String _xifexpression = null;
      DType _type = context.getType();
      boolean _tripleNotEquals = (_type != null);
      if (_tripleNotEquals) {
        String _name = context.getType().getName();
        String _plus = (" : " + _name);
        String _xifexpression_1 = null;
        DMultiplicity _multiplicity = context.getMultiplicity();
        boolean _tripleNotEquals_1 = (_multiplicity != null);
        if (_tripleNotEquals_1) {
          int _minOccurs = context.getMultiplicity().getMinOccurs();
          String _plus_1 = ("(" + Integer.valueOf(_minOccurs));
          String _plus_2 = (_plus_1 + " .. ");
          int _maxOccurs = context.getMultiplicity().getMaxOccurs();
          String _plus_3 = (_plus_2 + Integer.valueOf(_maxOccurs));
          _xifexpression_1 = (_plus_3 + ")");
        } else {
          _xifexpression_1 = "";
        }
        _xifexpression = (_plus + _xifexpression_1);
      } else {
        _xifexpression = " : (no type)";
      }
      final String type = _xifexpression;
      Image _invoke = this.imageDispatcher.invoke(context);
      Object _invoke_1 = this.textDispatcher.invoke(context);
      String _plus_4 = (_invoke_1 + type);
      _xblockexpression = this.createEObjectNode(parentNode, context, _invoke, _plus_4, (this.isLeafDispatcher.invoke(context)).booleanValue());
    }
    return _xblockexpression;
  }
  
  public EStructuralFeatureNode _createNode(final IOutlineNode parentNode, final DmxIterator iterator) {
    EStructuralFeatureNode _xblockexpression = null;
    {
      final EObjectNode node = this.createEObjectNode(parentNode, iterator, this.imageDispatcher.invoke(iterator), this.textDispatcher.invoke(iterator), (this.isLeafDispatcher.invoke(iterator)).booleanValue());
      EAttribute _dmxFilter_BaseType = DmxOutlineTreeProvider.DMX.getDmxFilter_BaseType();
      String _name = DmxOutlineTreeProvider.DMX.getDmxFilter_BaseType().getName();
      String _plus = (_name + " ");
      String _literal = iterator.getBaseType().getLiteral();
      String _plus_1 = (_plus + _literal);
      String _xifexpression = null;
      boolean _isBaseTypeCollection = iterator.isBaseTypeCollection();
      if (_isBaseTypeCollection) {
        _xifexpression = "*";
      } else {
        _xifexpression = "";
      }
      String _plus_2 = (_plus_1 + _xifexpression);
      _xblockexpression = this.createEStructuralFeatureNode(node, iterator, _dmxFilter_BaseType, DmxOutlineTreeProvider.FEATURE_IMAGE, _plus_2, true);
    }
    return _xblockexpression;
  }
  
  public EStructuralFeatureNode _createChildren(final IOutlineNode parentNode, final DmxPredicateWithCorrelationVariable pred) {
    EStructuralFeatureNode _xblockexpression = null;
    {
      DContext _correlationVariable = pred.getCorrelationVariable();
      boolean _tripleNotEquals = (_correlationVariable != null);
      if (_tripleNotEquals) {
        this.createEStructuralFeatureNode(parentNode, pred, DmxOutlineTreeProvider.DMX.getDmxPredicateWithCorrelationVariable_CorrelationVariable(), DmxOutlineTreeProvider.FEATURE_IMAGE, DmxOutlineTreeProvider.DMX.getDmxPredicateWithCorrelationVariable_CorrelationVariable().getName(), false);
      }
      EStructuralFeatureNode _xifexpression = null;
      DExpression _value = pred.getValue();
      boolean _tripleNotEquals_1 = (_value != null);
      if (_tripleNotEquals_1) {
        _xifexpression = this.createEStructuralFeatureNode(parentNode, pred, DmxOutlineTreeProvider.DMX.getDmxPredicateWithCorrelationVariable_Value(), DmxOutlineTreeProvider.FEATURE_IMAGE, DmxOutlineTreeProvider.DMX.getDmxPredicateWithCorrelationVariable_Value().getName(), false);
      }
      _xblockexpression = _xifexpression;
    }
    return _xblockexpression;
  }
  
  public EStructuralFeatureNode _createChildren(final IOutlineNode parentNode, final DmxMemberNavigation nav) {
    EStructuralFeatureNode _xblockexpression = null;
    {
      if (((nav.getMember() != null) && (!nav.getMember().eIsProxy()))) {
        this.createEStructuralFeatureNode(parentNode, nav, DmxOutlineTreeProvider.DMX.getDmxMemberNavigation_Member(), DmxOutlineTreeProvider.FEATURE_IMAGE, DmxOutlineTreeProvider.DMX.getDmxMemberNavigation_Member().getName(), false);
      }
      DExpression _precedingNavigationSegment = nav.getPrecedingNavigationSegment();
      boolean _tripleNotEquals = (_precedingNavigationSegment != null);
      if (_tripleNotEquals) {
        this.createEStructuralFeatureNode(parentNode, nav, DmxOutlineTreeProvider.DMX.getDmxMemberNavigation_PrecedingNavigationSegment(), DmxOutlineTreeProvider.FEATURE_IMAGE, DmxOutlineTreeProvider.DMX.getDmxMemberNavigation_PrecedingNavigationSegment().getName(), false);
      }
      EStructuralFeatureNode _xifexpression = null;
      int _length = ((Object[])Conversions.unwrapArray(nav.getMemberCallArguments(), Object.class)).length;
      boolean _greaterThan = (_length > 0);
      if (_greaterThan) {
        _xifexpression = this.createEStructuralFeatureNode(parentNode, nav, DmxOutlineTreeProvider.DMX.getDmxMemberNavigation_MemberCallArguments(), DmxOutlineTreeProvider.FEATURE_IMAGE, DmxOutlineTreeProvider.DMX.getDmxMemberNavigation_MemberCallArguments().getName(), false);
      }
      _xblockexpression = _xifexpression;
    }
    return _xblockexpression;
  }
  
  public EStructuralFeatureNode _createChildren(final IOutlineNode parentNode, final DmxAssignment assign) {
    EStructuralFeatureNode _xblockexpression = null;
    {
      DExpression _precedingNavigationSegment = assign.getPrecedingNavigationSegment();
      boolean _tripleNotEquals = (_precedingNavigationSegment != null);
      if (_tripleNotEquals) {
        this.createEStructuralFeatureNode(parentNode, assign, DmxOutlineTreeProvider.DMX.getDmxAssignment_PrecedingNavigationSegment(), DmxOutlineTreeProvider.FEATURE_IMAGE, DmxOutlineTreeProvider.DMX.getDmxAssignment_PrecedingNavigationSegment().getName(), false);
      }
      if (((assign.getAssignToMember() != null) && (!assign.getAssignToMember().eIsProxy()))) {
        this.createEStructuralFeatureNode(parentNode, assign, DmxOutlineTreeProvider.DMX.getDmxAssignment_AssignToMember(), DmxOutlineTreeProvider.FEATURE_IMAGE, DmxOutlineTreeProvider.DMX.getDmxAssignment_AssignToMember().getName(), false);
      }
      EStructuralFeatureNode _xifexpression = null;
      if (((assign.getValue() != null) && (!assign.getAssignToMember().eIsProxy()))) {
        _xifexpression = this.createEStructuralFeatureNode(parentNode, assign, DmxOutlineTreeProvider.DMX.getDmxAssignment_Value(), DmxOutlineTreeProvider.FEATURE_IMAGE, DmxOutlineTreeProvider.DMX.getDmxAssignment_Value().getName(), false);
      }
      _xblockexpression = _xifexpression;
    }
    return _xblockexpression;
  }
  
  public EStructuralFeatureNode _createNode(final IOutlineNode parentNode, final DmxContextReference ref) {
    EStructuralFeatureNode _xblockexpression = null;
    {
      final EObjectNode node = this.createEObjectNode(parentNode, ref, this.imageDispatcher.invoke(ref), this.textDispatcher.invoke(ref), (this.isLeafDispatcher.invoke(ref)).booleanValue());
      DNamedElement _target = ref.getTarget();
      boolean _tripleNotEquals = (_target != null);
      if (_tripleNotEquals) {
        EReference _dmxContextReference_Target = DmxOutlineTreeProvider.DMX.getDmxContextReference_Target();
        String _name = DmxOutlineTreeProvider.DMX.getDmxContextReference_Target().getName();
        String _plus = (_name + ": ");
        String _name_1 = ref.getTarget().getName();
        String _plus_1 = (_plus + _name_1);
        this.createEStructuralFeatureNode(node, ref, _dmxContextReference_Target, DmxOutlineTreeProvider.FEATURE_IMAGE, _plus_1, false);
      }
      EStructuralFeatureNode _xifexpression = null;
      boolean _isAll = ref.isAll();
      if (_isAll) {
        _xifexpression = this.createEStructuralFeatureNode(node, ref, DmxOutlineTreeProvider.DMX.getDmxContextReference_All(), DmxOutlineTreeProvider.FEATURE_IMAGE, DmxOutlineTreeProvider.DMX.getDmxContextReference_All().getName(), true);
      }
      _xblockexpression = _xifexpression;
    }
    return _xblockexpression;
  }
}
