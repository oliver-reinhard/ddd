/*
 * generated by Xtext 2.17.1
 */
package com.mimacom.ddd.dm.dom.validation

import com.mimacom.ddd.dm.dom.DomField
import com.mimacom.ddd.dm.dom.DomPackage
import org.eclipse.xtext.validation.Check

import static com.mimacom.ddd.dm.dmx.typecomputer.DmxTypeDescriptorProvider.*

/**
 * This class contains custom validation rules. 
 * 
 * See https://www.eclipse.org/Xtext/documentation/303_runtime_concepts.html#validation
 */
class DomValidator extends AbstractDomValidator {
	
	protected static val DOM = DomPackage.eINSTANCE

	@Check
	def checkType(DomField expr) {
		val leftType = getTypeAndCheckNotNull(expr, DOM.domField_Ref)
		if (leftType.isCompatibleWith(TIMEPOINT)) {
			// allow string literals as Timepoints 
			expectTimepointValue(expr.value, leftType, DOM.domField_Value)
		} else {
			expectType(expr.value, leftType, DOM.domField_Value)
		}
	}

}
