/**
 * generated by Xtext 2.16.0
 */
package com.mimacom.ddd.dm.dmx.tests;

import com.google.inject.Inject;
import com.mimacom.ddd.dm.base.DComplexType;
import com.mimacom.ddd.dm.base.DExpression;
import com.mimacom.ddd.dm.base.DIdentityType;
import com.mimacom.ddd.dm.base.DNamedElement;
import com.mimacom.ddd.dm.dmx.DmxNamespace;
import com.mimacom.ddd.dm.dmx.DmxTest;
import com.mimacom.ddd.dm.dmx.impl.DAssignmentImpl;
import com.mimacom.ddd.dm.dmx.impl.DBooleanLiteralImpl;
import com.mimacom.ddd.dm.dmx.impl.DConstructorCallImpl;
import com.mimacom.ddd.dm.dmx.impl.DDecimalLiteralImpl;
import com.mimacom.ddd.dm.dmx.impl.DFunctionCallImpl;
import com.mimacom.ddd.dm.dmx.impl.DNaturalLiteralImpl;
import com.mimacom.ddd.dm.dmx.impl.DRaiseExpressionImpl;
import com.mimacom.ddd.dm.dmx.impl.DReturnExpressionImpl;
import com.mimacom.ddd.dm.dmx.impl.DSelfExpressionImpl;
import com.mimacom.ddd.dm.dmx.impl.DStringLiteralImpl;
import com.mimacom.ddd.dm.dmx.impl.DUndefinedLiteralImpl;
import com.mimacom.ddd.dm.dmx.impl.DmxContextReferenceImpl;
import com.mimacom.ddd.dm.dmx.impl.DmxFunctionImpl;
import com.mimacom.ddd.dm.dmx.impl.DmxMemberNavigationImpl;
import com.mimacom.ddd.dm.dmx.tests.DmxInjectorProvider;
import org.eclipse.emf.common.util.EList;
import org.eclipse.emf.ecore.resource.Resource;
import org.eclipse.xtend2.lib.StringConcatenation;
import org.eclipse.xtext.testing.InjectWith;
import org.eclipse.xtext.testing.extensions.InjectionExtension;
import org.eclipse.xtext.testing.util.ParseHelper;
import org.eclipse.xtext.xbase.lib.Exceptions;
import org.eclipse.xtext.xbase.lib.Extension;
import org.eclipse.xtext.xbase.lib.IterableExtensions;
import org.junit.Assert;
import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import org.junit.jupiter.api.extension.ExtendWith;

@ExtendWith(InjectionExtension.class)
@InjectWith(DmxInjectorProvider.class)
@SuppressWarnings("all")
public class DmxParsingTest {
  @Inject
  @Extension
  private ParseHelper<DmxNamespace> parseHelper;
  
  @Test
  public void testLiterals() {
    try {
      StringConcatenation _builder = new StringConcatenation();
      _builder.append("test T0 { true }");
      _builder.newLine();
      _builder.append("test T1 { \"Domain Model\" }");
      _builder.newLine();
      _builder.append("test T2 { 2 }");
      _builder.newLine();
      _builder.append("test T3 { 314.159E-2 }");
      _builder.newLine();
      _builder.append("test T4 { nil }");
      _builder.newLine();
      _builder.append("test T5 { NIL }");
      _builder.newLine();
      final DmxNamespace result = this.parseHelper.parse(_builder);
      Assert.assertNotNull(result);
      final EList<Resource.Diagnostic> errors = result.eResource().getErrors();
      boolean _isEmpty = errors.isEmpty();
      StringConcatenation _builder_1 = new StringConcatenation();
      _builder_1.append("Literal errors: ");
      String _join = IterableExtensions.join(errors, "; ");
      _builder_1.append(_join);
      Assertions.assertTrue(_isEmpty, _builder_1.toString());
      final EList<DmxTest> tests = result.getTests();
      final DExpression e0 = tests.get(0).getExpr();
      Assert.assertEquals(DBooleanLiteralImpl.class, e0.getClass());
      Assert.assertEquals(Boolean.valueOf(true), Boolean.valueOf(((DBooleanLiteralImpl) e0).isValue()));
      final DExpression e1 = tests.get(1).getExpr();
      Assert.assertEquals(DStringLiteralImpl.class, e1.getClass());
      Assert.assertEquals("Domain Model", ((DStringLiteralImpl) e1).getValue());
      final DExpression e2 = tests.get(2).getExpr();
      Assert.assertEquals(e2.getClass(), DNaturalLiteralImpl.class);
      Assert.assertEquals(2, ((DNaturalLiteralImpl) e2).getValue());
      final DExpression e3 = tests.get(3).getExpr();
      Assert.assertEquals(e3.getClass(), DDecimalLiteralImpl.class);
      Assert.assertEquals("314.159E-2", ((DDecimalLiteralImpl) e3).getValue());
      final DExpression e4 = tests.get(4).getExpr();
      Assert.assertEquals(DUndefinedLiteralImpl.class, e4.getClass());
      final DExpression e5 = tests.get(5).getExpr();
      Assert.assertEquals(DUndefinedLiteralImpl.class, e5.getClass());
    } catch (Throwable _e) {
      throw Exceptions.sneakyThrow(_e);
    }
  }
  
  @Test
  public void testPrimaries() {
    try {
      StringConcatenation _builder = new StringConcatenation();
      _builder.append("test T0 { self }");
      _builder.newLine();
      _builder.append("test T1 { return }");
      _builder.newLine();
      _builder.append("test T2 { return 2 }");
      _builder.newLine();
      _builder.append("test T3 { raise \"Expression\" }");
      _builder.newLine();
      _builder.append("test T4 { (4) }");
      _builder.newLine();
      _builder.newLine();
      _builder.append("test T5 { f() }");
      _builder.newLine();
      _builder.append("test T6 { f(6) }");
      _builder.newLine();
      _builder.append("test T7 { new X }");
      _builder.newLine();
      _builder.append("test T8 { new X(9) }");
      _builder.newLine();
      _builder.append("test T9 { A }");
      _builder.newLine();
      final DmxNamespace result = this.parseHelper.parse(_builder);
      Assert.assertNotNull(result);
      final EList<Resource.Diagnostic> errors = result.eResource().getErrors();
      boolean _isEmpty = errors.isEmpty();
      StringConcatenation _builder_1 = new StringConcatenation();
      _builder_1.append("Primaries errors: ");
      String _join = IterableExtensions.join(errors, "; ");
      _builder_1.append(_join);
      Assertions.assertTrue(_isEmpty, _builder_1.toString());
      final EList<DmxTest> tests = result.getTests();
      final DExpression e0 = tests.get(0).getExpr();
      Assert.assertEquals(DSelfExpressionImpl.class, e0.getClass());
      final DExpression e1 = tests.get(1).getExpr();
      Assert.assertEquals(DReturnExpressionImpl.class, e1.getClass());
      Assert.assertEquals(null, ((DReturnExpressionImpl) e1).getExpression());
      final DExpression e2 = tests.get(2).getExpr();
      Assert.assertEquals(DReturnExpressionImpl.class, e2.getClass());
      Assert.assertEquals(DNaturalLiteralImpl.class, ((DReturnExpressionImpl) e2).getExpression().getClass());
      final DExpression e3 = tests.get(3).getExpr();
      Assert.assertEquals(DRaiseExpressionImpl.class, e3.getClass());
      Assert.assertEquals(DStringLiteralImpl.class, ((DRaiseExpressionImpl) e3).getExpression().getClass());
      final DExpression e4 = tests.get(4).getExpr();
      Assert.assertEquals(DNaturalLiteralImpl.class, e4.getClass());
      Assert.assertEquals(4, ((DNaturalLiteralImpl) e4).getValue());
      final DExpression e5 = tests.get(5).getExpr();
      Assert.assertEquals(DFunctionCallImpl.class, e5.getClass());
      Assert.assertTrue(((DFunctionCallImpl) e5).basicGetFunction().eIsProxy());
      Assert.assertEquals(DmxFunctionImpl.class, ((DFunctionCallImpl) e5).basicGetFunction().getClass());
      Assert.assertEquals(0, ((DFunctionCallImpl) e5).getFunctionCallArguments().size());
      final DExpression e6 = tests.get(6).getExpr();
      Assert.assertEquals(DmxFunctionImpl.class, ((DFunctionCallImpl) e6).basicGetFunction().getClass());
      Assert.assertEquals(1, ((DFunctionCallImpl) e6).getFunctionCallArguments().size());
      Assert.assertEquals(DNaturalLiteralImpl.class, ((DFunctionCallImpl) e6).getFunctionCallArguments().get(0).getClass());
      final DExpression e7 = tests.get(7).getExpr();
      Assert.assertEquals(DConstructorCallImpl.class, e7.getClass());
      Assert.assertTrue(((DConstructorCallImpl) e7).basicGetConstructor().eIsProxy());
      DComplexType _basicGetConstructor = ((DConstructorCallImpl) e7).basicGetConstructor();
      Assert.assertTrue((_basicGetConstructor instanceof DIdentityType));
      Assert.assertFalse(((DConstructorCallImpl) e7).isExplicitConstructorCall());
      final DExpression e8 = tests.get(8).getExpr();
      Assert.assertEquals(DConstructorCallImpl.class, e8.getClass());
      DComplexType _basicGetConstructor_1 = ((DConstructorCallImpl) e8).basicGetConstructor();
      Assert.assertTrue((_basicGetConstructor_1 instanceof DIdentityType));
      Assert.assertTrue(((DConstructorCallImpl) e8).isExplicitConstructorCall());
      Assert.assertEquals(1, ((DConstructorCallImpl) e8).getArguments().size());
      Assert.assertEquals(DNaturalLiteralImpl.class, ((DConstructorCallImpl) e8).getArguments().get(0).getClass());
      final DExpression e9 = tests.get(9).getExpr();
      Assert.assertEquals(DmxContextReferenceImpl.class, e9.getClass());
      Assert.assertTrue(((DmxContextReferenceImpl) e9).basicGetTarget().eIsProxy());
      DNamedElement _basicGetTarget = ((DmxContextReferenceImpl) e9).basicGetTarget();
      Assert.assertTrue((_basicGetTarget instanceof DNamedElement));
    } catch (Throwable _e) {
      throw Exceptions.sneakyThrow(_e);
    }
  }
  
  @Test
  public void testMemberFeatureCalls() {
    try {
      StringConcatenation _builder = new StringConcatenation();
      _builder.append("test T0 { self.a }");
      _builder.newLine();
      _builder.append("test T1 { self.a.b }");
      _builder.newLine();
      _builder.append("test T2 { A.b }");
      _builder.newLine();
      _builder.append("test T3 { A.b.c }");
      _builder.newLine();
      final DmxNamespace result = this.parseHelper.parse(_builder);
      Assert.assertNotNull(result);
      final EList<Resource.Diagnostic> errors = result.eResource().getErrors();
      boolean _isEmpty = errors.isEmpty();
      StringConcatenation _builder_1 = new StringConcatenation();
      _builder_1.append("MemberFeatureCalls errors: ");
      String _join = IterableExtensions.join(errors, " } ");
      _builder_1.append(_join);
      Assertions.assertTrue(_isEmpty, _builder_1.toString());
      final EList<DmxTest> tests = result.getTests();
      final DExpression e0 = tests.get(0).getExpr();
      Assert.assertEquals(DmxMemberNavigationImpl.class, e0.getClass());
      Assert.assertTrue(((DmxMemberNavigationImpl) e0).basicGetMember().eIsProxy());
      Assert.assertEquals(DSelfExpressionImpl.class, ((DmxMemberNavigationImpl) e0).getPrecedingNavigationSegment().getClass());
      final DExpression e1 = tests.get(1).getExpr();
      Assert.assertEquals(DmxMemberNavigationImpl.class, e1.getClass());
      final DmxMemberNavigationImpl e1_1 = ((DmxMemberNavigationImpl) e1);
      Assert.assertTrue(e1_1.basicGetMember().eIsProxy());
      Assert.assertEquals(DmxMemberNavigationImpl.class, e1_1.getPrecedingNavigationSegment().getClass());
      DExpression _precedingNavigationSegment = e1_1.getPrecedingNavigationSegment();
      final DmxMemberNavigationImpl e1_2 = ((DmxMemberNavigationImpl) _precedingNavigationSegment);
      Assert.assertTrue(e1_2.basicGetMember().eIsProxy());
      Assert.assertEquals(DSelfExpressionImpl.class, e1_2.getPrecedingNavigationSegment().getClass());
      final DExpression e2 = tests.get(2).getExpr();
      Assert.assertEquals(DmxMemberNavigationImpl.class, e2.getClass());
      final DmxMemberNavigationImpl e2_1 = ((DmxMemberNavigationImpl) e2);
      Assert.assertTrue(((DmxMemberNavigationImpl) e2_1).basicGetMember().eIsProxy());
      Assert.assertEquals(DmxContextReferenceImpl.class, e2_1.getPrecedingNavigationSegment().getClass());
      DExpression _precedingNavigationSegment_1 = e2_1.getPrecedingNavigationSegment();
      final DmxContextReferenceImpl e2_2 = ((DmxContextReferenceImpl) _precedingNavigationSegment_1);
      Assert.assertTrue(e2_2.basicGetTarget().eIsProxy());
      DNamedElement _basicGetTarget = e2_2.basicGetTarget();
      Assert.assertTrue((_basicGetTarget instanceof DNamedElement));
      final DExpression e3 = tests.get(3).getExpr();
      Assert.assertEquals(DmxMemberNavigationImpl.class, e3.getClass());
      final DmxMemberNavigationImpl e3_1 = ((DmxMemberNavigationImpl) e3);
      Assert.assertTrue(e3_1.basicGetMember().eIsProxy());
      Assert.assertEquals(DmxMemberNavigationImpl.class, e3_1.getPrecedingNavigationSegment().getClass());
      DExpression _precedingNavigationSegment_2 = e3_1.getPrecedingNavigationSegment();
      final DmxMemberNavigationImpl e3_2 = ((DmxMemberNavigationImpl) _precedingNavigationSegment_2);
      Assert.assertTrue(e3_2.basicGetMember().eIsProxy());
      Assert.assertEquals(DmxContextReferenceImpl.class, e3_2.getPrecedingNavigationSegment().getClass());
      DExpression _precedingNavigationSegment_3 = e3_2.getPrecedingNavigationSegment();
      final DmxContextReferenceImpl e3_3 = ((DmxContextReferenceImpl) _precedingNavigationSegment_3);
      Assert.assertTrue(e3_3.basicGetTarget().eIsProxy());
      DNamedElement _basicGetTarget_1 = e3_3.basicGetTarget();
      Assert.assertTrue((_basicGetTarget_1 instanceof DNamedElement));
    } catch (Throwable _e) {
      throw Exceptions.sneakyThrow(_e);
    }
  }
  
  @Test
  public void testAssignment() {
    try {
      StringConcatenation _builder = new StringConcatenation();
      _builder.append("test T0 { a := 0 }");
      _builder.newLine();
      _builder.append("test T1 { self.a := 1 }");
      _builder.newLine();
      _builder.append("test T2 { A.b := 2 }");
      _builder.newLine();
      _builder.append("test T3 { A.b.c := 3 }");
      _builder.newLine();
      final DmxNamespace result = this.parseHelper.parse(_builder);
      Assert.assertNotNull(result);
      final EList<Resource.Diagnostic> errors = result.eResource().getErrors();
      boolean _isEmpty = errors.isEmpty();
      StringConcatenation _builder_1 = new StringConcatenation();
      _builder_1.append("Assignment errors: ");
      String _join = IterableExtensions.join(errors, "; ");
      _builder_1.append(_join);
      Assertions.assertTrue(_isEmpty, _builder_1.toString());
      final EList<DmxTest> tests = result.getTests();
      final DExpression e0 = tests.get(0).getExpr();
      Assert.assertEquals(DAssignmentImpl.class, e0.getClass());
      Assert.assertTrue(((DAssignmentImpl) e0).basicGetAssignToMember().eIsProxy());
      Assert.assertNull(((DAssignmentImpl) e0).getMemberContainer());
      Assert.assertEquals(DNaturalLiteralImpl.class, ((DAssignmentImpl) e0).getValue().getClass());
      final DExpression e1 = tests.get(1).getExpr();
      Assert.assertEquals(DAssignmentImpl.class, e1.getClass());
      Assert.assertTrue(((DAssignmentImpl) e1).basicGetAssignToMember().eIsProxy());
      Assert.assertEquals(DSelfExpressionImpl.class, ((DAssignmentImpl) e1).getMemberContainer().getClass());
      Assert.assertEquals(DNaturalLiteralImpl.class, ((DAssignmentImpl) e1).getValue().getClass());
      final DExpression e2 = tests.get(2).getExpr();
      Assert.assertEquals(DAssignmentImpl.class, e2.getClass());
      Assert.assertTrue(((DAssignmentImpl) e2).basicGetAssignToMember().eIsProxy());
      Assert.assertEquals(DmxContextReferenceImpl.class, ((DAssignmentImpl) e2).getMemberContainer().getClass());
      Assert.assertEquals(DNaturalLiteralImpl.class, ((DAssignmentImpl) e2).getValue().getClass());
      final DExpression e3 = tests.get(3).getExpr();
      Assert.assertEquals(DAssignmentImpl.class, e3.getClass());
      Assert.assertTrue(((DAssignmentImpl) e3).basicGetAssignToMember().eIsProxy());
      Assert.assertEquals(DmxMemberNavigationImpl.class, ((DAssignmentImpl) e3).getMemberContainer().getClass());
      DExpression _memberContainer = ((DAssignmentImpl) e3).getMemberContainer();
      final DmxMemberNavigationImpl e3_1 = ((DmxMemberNavigationImpl) _memberContainer);
      Assert.assertTrue(e3_1.basicGetMember().eIsProxy());
      Assert.assertEquals(DmxContextReferenceImpl.class, e3_1.getPrecedingNavigationSegment().getClass());
      Assert.assertEquals(DNaturalLiteralImpl.class, ((DAssignmentImpl) e3).getValue().getClass());
    } catch (Throwable _e) {
      throw Exceptions.sneakyThrow(_e);
    }
  }
}
