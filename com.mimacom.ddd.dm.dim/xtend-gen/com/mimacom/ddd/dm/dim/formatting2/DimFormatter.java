/**
 * generated by Xtext 2.16.0
 */
package com.mimacom.ddd.dm.dim.formatting2;

import com.google.inject.Inject;
import com.mimacom.ddd.dm.base.base.DAggregate;
import com.mimacom.ddd.dm.base.base.DComplexType;
import com.mimacom.ddd.dm.base.base.DEnumeration;
import com.mimacom.ddd.dm.base.base.DExpression;
import com.mimacom.ddd.dm.base.base.DFeature;
import com.mimacom.ddd.dm.base.base.DLiteral;
import com.mimacom.ddd.dm.base.base.DNamedPredicate;
import com.mimacom.ddd.dm.base.base.DNamespace;
import com.mimacom.ddd.dm.base.base.DRichText;
import com.mimacom.ddd.dm.base.base.DType;
import com.mimacom.ddd.dm.dim.DomainInformationModel;
import com.mimacom.ddd.dm.dim.services.DimGrammarAccess;
import com.mimacom.ddd.dm.dmx.DmxModel;
import com.mimacom.ddd.dm.dmx.formatting2.DmxFormatter;
import java.util.Arrays;
import java.util.List;
import org.eclipse.emf.common.util.EList;
import org.eclipse.emf.ecore.EObject;
import org.eclipse.xtext.formatting2.IFormattableDocument;
import org.eclipse.xtext.formatting2.IHiddenRegionFormatter;
import org.eclipse.xtext.formatting2.regionaccess.ISemanticRegion;
import org.eclipse.xtext.resource.XtextResource;
import org.eclipse.xtext.xbase.lib.Extension;
import org.eclipse.xtext.xbase.lib.IterableExtensions;
import org.eclipse.xtext.xbase.lib.Procedures.Procedure1;

@SuppressWarnings("all")
public class DimFormatter extends DmxFormatter {
  @Inject
  @Extension
  private DimGrammarAccess _dimGrammarAccess;
  
  protected void _format(final DomainInformationModel model, @Extension final IFormattableDocument document) {
    final ISemanticRegion open = this.textRegionExtensions.regionFor(model).keyword(this._dimGrammarAccess.getDomainInformationModelAccess().getLeftCurlyBracketKeyword_5());
    final ISemanticRegion close = this.textRegionExtensions.regionFor(model).keyword(this._dimGrammarAccess.getDomainInformationModelAccess().getRightCurlyBracketKeyword_7());
    final Procedure1<IHiddenRegionFormatter> _function = (IHiddenRegionFormatter it) -> {
      it.setNewLines(2);
    };
    document.append(open, _function);
    final Procedure1<IHiddenRegionFormatter> _function_1 = (IHiddenRegionFormatter it) -> {
      it.indent();
    };
    document.<ISemanticRegion, ISemanticRegion>interior(open, close, _function_1);
    final Procedure1<IHiddenRegionFormatter> _function_2 = (IHiddenRegionFormatter it) -> {
      it.setNewLines(2);
    };
    document.append(close, _function_2);
    EList<DType> _types = model.getTypes();
    for (final DType type : _types) {
      {
        document.<DType>format(type);
        final Procedure1<IHiddenRegionFormatter> _function_3 = (IHiddenRegionFormatter it) -> {
          it.setNewLines(2);
        };
        document.<DType>append(type, _function_3);
      }
    }
    EList<DAggregate> _aggregates = model.getAggregates();
    for (final DAggregate aggregate : _aggregates) {
      {
        document.<DAggregate>format(aggregate);
        final Procedure1<IHiddenRegionFormatter> _function_3 = (IHiddenRegionFormatter it) -> {
          int _xifexpression = (int) 0;
          DAggregate _last = IterableExtensions.<DAggregate>last(model.getAggregates());
          boolean _tripleEquals = (aggregate == _last);
          if (_tripleEquals) {
            _xifexpression = 1;
          } else {
            _xifexpression = 2;
          }
          it.setNewLines(_xifexpression);
        };
        document.<DAggregate>append(aggregate, _function_3);
      }
    }
  }
  
  protected void _format(final DAggregate aggregate, @Extension final IFormattableDocument document) {
    final ISemanticRegion open = this.textRegionExtensions.regionFor(aggregate).keyword(this._dimGrammarAccess.getDimAggregateAccess().getLeftCurlyBracketKeyword_4());
    final ISemanticRegion close = this.textRegionExtensions.regionFor(aggregate).keyword(this._dimGrammarAccess.getDimAggregateAccess().getRightCurlyBracketKeyword_7());
    final Procedure1<IHiddenRegionFormatter> _function = (IHiddenRegionFormatter it) -> {
      it.setNewLines(2);
    };
    document.append(open, _function);
    final Procedure1<IHiddenRegionFormatter> _function_1 = (IHiddenRegionFormatter it) -> {
      it.indent();
    };
    document.<ISemanticRegion, ISemanticRegion>interior(open, close, _function_1);
    EList<DFeature> _features = aggregate.getFeatures();
    for (final DFeature query : _features) {
      {
        document.<DFeature>format(query);
        final Procedure1<IHiddenRegionFormatter> _function_2 = (IHiddenRegionFormatter it) -> {
          it.setNewLines(2);
        };
        document.<DFeature>append(query, _function_2);
      }
    }
    EList<DType> _types = aggregate.getTypes();
    for (final DType type : _types) {
      {
        document.<DType>format(type);
        final Procedure1<IHiddenRegionFormatter> _function_2 = (IHiddenRegionFormatter it) -> {
          int _xifexpression = (int) 0;
          DType _last = IterableExtensions.<DType>last(aggregate.getTypes());
          boolean _tripleEquals = (type == _last);
          if (_tripleEquals) {
            _xifexpression = 1;
          } else {
            _xifexpression = 2;
          }
          it.setNewLines(_xifexpression);
        };
        document.<DType>append(type, _function_2);
      }
    }
  }
  
  protected void _format(final DEnumeration en, @Extension final IFormattableDocument document) {
    int _size = en.getLiterals().size();
    boolean _greaterThan = (_size > 3);
    if (_greaterThan) {
      final ISemanticRegion open = this.textRegionExtensions.regionFor(en).keyword(this._dimGrammarAccess.getDimEnumerationAccess().getLeftCurlyBracketKeyword_5());
      final ISemanticRegion close = this.textRegionExtensions.regionFor(en).keyword(this._dimGrammarAccess.getDimEnumerationAccess().getRightCurlyBracketKeyword_8());
      final Procedure1<IHiddenRegionFormatter> _function = (IHiddenRegionFormatter it) -> {
        it.newLine();
      };
      document.append(open, _function);
      final Procedure1<IHiddenRegionFormatter> _function_1 = (IHiddenRegionFormatter it) -> {
        it.indent();
      };
      document.<ISemanticRegion, ISemanticRegion>interior(open, close, _function_1);
      EList<DLiteral> _literals = en.getLiterals();
      for (final DLiteral literal : _literals) {
        final Procedure1<IHiddenRegionFormatter> _function_2 = (IHiddenRegionFormatter it) -> {
          it.noSpace();
        };
        document.surround(this.textRegionExtensions.regionFor(literal).assignment(this._dimGrammarAccess.getDimLiteralAccess().getNameAssignment_1()), _function_2);
      }
      List<ISemanticRegion> _keywords = this.textRegionExtensions.regionFor(en).keywords(this._dimGrammarAccess.getDimEnumerationAccess().getCommaKeyword_6_1_0());
      for (final ISemanticRegion comma : _keywords) {
        final Procedure1<IHiddenRegionFormatter> _function_3 = (IHiddenRegionFormatter it) -> {
          it.newLine();
        };
        document.append(comma, _function_3);
      }
      final Procedure1<IHiddenRegionFormatter> _function_4 = (IHiddenRegionFormatter it) -> {
        it.newLine();
      };
      document.<DLiteral>append(IterableExtensions.<DLiteral>last(en.getLiterals()), _function_4);
    }
  }
  
  protected void _format(final DComplexType type, @Extension final IFormattableDocument document) {
    final ISemanticRegion open = this.textRegionExtensions.regionFor(type).keyword(this._dimGrammarAccess.getDimEntityTypeAccess().getLeftCurlyBracketKeyword_5());
    final ISemanticRegion close = this.textRegionExtensions.regionFor(type).keyword(this._dimGrammarAccess.getDimEntityTypeAccess().getRightCurlyBracketKeyword_8());
    final Procedure1<IHiddenRegionFormatter> _function = (IHiddenRegionFormatter it) -> {
      it.newLine();
    };
    document.append(open, _function);
    final Procedure1<IHiddenRegionFormatter> _function_1 = (IHiddenRegionFormatter it) -> {
      it.indent();
    };
    document.<ISemanticRegion, ISemanticRegion>interior(open, close, _function_1);
    EList<DFeature> _features = type.getFeatures();
    for (final DFeature feature : _features) {
      final Procedure1<IHiddenRegionFormatter> _function_2 = (IHiddenRegionFormatter it) -> {
        it.newLine();
      };
      document.<DFeature>append(feature, _function_2);
    }
    EList<DNamedPredicate> _constraints = type.getConstraints();
    for (final DNamedPredicate constraint : _constraints) {
      final Procedure1<IHiddenRegionFormatter> _function_3 = (IHiddenRegionFormatter it) -> {
        it.newLine();
      };
      document.<DNamedPredicate>append(constraint, _function_3);
    }
  }
  
  protected void _format(final DType type, @Extension final IFormattableDocument document) {
  }
  
  public void format(final Object en, final IFormattableDocument document) {
    if (en instanceof DEnumeration) {
      _format((DEnumeration)en, document);
      return;
    } else if (en instanceof DComplexType) {
      _format((DComplexType)en, document);
      return;
    } else if (en instanceof DomainInformationModel) {
      _format((DomainInformationModel)en, document);
      return;
    } else if (en instanceof DAggregate) {
      _format((DAggregate)en, document);
      return;
    } else if (en instanceof DRichText) {
      _format((DRichText)en, document);
      return;
    } else if (en instanceof DType) {
      _format((DType)en, document);
      return;
    } else if (en instanceof DmxModel) {
      _format((DmxModel)en, document);
      return;
    } else if (en instanceof XtextResource) {
      _format((XtextResource)en, document);
      return;
    } else if (en instanceof DExpression) {
      _format((DExpression)en, document);
      return;
    } else if (en instanceof DNamespace) {
      _format((DNamespace)en, document);
      return;
    } else if (en instanceof EObject) {
      _format((EObject)en, document);
      return;
    } else if (en == null) {
      _format((Void)null, document);
      return;
    } else if (en != null) {
      _format(en, document);
      return;
    } else {
      throw new IllegalArgumentException("Unhandled parameter types: " +
        Arrays.<Object>asList(en, document).toString());
    }
  }
}
